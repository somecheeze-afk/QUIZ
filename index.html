<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ã‚³ã‚³ã‚¤ãƒã‚¯ã‚¤ã‚ºï¼ˆã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥å®‰å…¨ç‰ˆãƒ»v20250913fï¼‰</title>
  <meta name="x-deploy" content="v-20250913f" />
  <style>
    :root{--bg:#0f172a;--panel:#111827;--panel2:#1f2937;--text:#e5e7eb;--muted:#9ca3af;--ok:#22c55e;--ng:#ef4444;--accent:#f59e0b}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#0b1025,#0f172a);color:var(--text);font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans JP","Hiragino Kaku Gothic ProN","Yu Gothic UI",Meiryo,sans-serif}
    .wrap{max-width:860px;margin:0 auto;padding:24px}
    .card{background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.3)}
    h1{margin:0 0 8px;font-size:clamp(22px,4vw,32px)}
    h2{margin:0 0 8px;font-size:clamp(20px,3vw,26px);color:#eab308}
    .muted{color:var(--muted)}
    .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin:10px 0}
    .pill{padding:4px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.1);background:#0b1020;font-size:12px}
    .btn{appearance:none;border:none;cursor:pointer;padding:12px 16px;border-radius:12px;background:#374151;color:#fff;font-weight:700}
    .btn.primary{background:linear-gradient(90deg,#f59e0b,#f97316);color:#111}
    .choices{display:grid;gap:10px}
    .choice{padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:#0b1222;color:#e5e7eb;text-align:left}
    .choice[disabled]{opacity:.7;cursor:not-allowed}
    .correct{box-shadow:0 0 0 2px rgba(34,197,94,.25) inset;border-color:rgba(34,197,94,.9)}
    .wrong{box-shadow:0 0 0 2px rgba(239,68,68,.25) inset;border-color:rgba(239,68,68,.9)}
    .progress{height:10px;border-radius:999px;background:#111827;border:1px solid rgba(255,255,255,.06);overflow:hidden;margin:8px 0}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#22c55e,#f59e0b)}
    .foot{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-top:10px}
    input[type=number]{padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.1);background:#0b1020;color:#fff}

    /* ===== Splash (Auto-fade, JSä¸è¦) ===== */
    #splash{position:fixed;inset:0;display:grid;place-items:center;background:radial-gradient(1200px 800px at 50% 0%,#1f2937 0%,#0f172a 60%);z-index:1000;animation:splashFade .6s ease 1.2s forwards}
    .splash-inner{text-align:center}
    .logo{font-weight:800;font-size:clamp(34px,6vw,64px);display:flex;gap:.35em;align-items:center;justify-content:center}
    .brand{background:linear-gradient(90deg,#fde68a,#f59e0b,#f97316);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent}
    .emoji{filter:drop-shadow(0 8px 20px rgba(0,0,0,.6));animation:bob 1.8s ease-in-out infinite}
    .skip{margin-top:12px}
    @keyframes bob{0%,100%{transform:translateY(0) rotate(0)}50%{transform:translateY(-8px) rotate(4deg)}}
    @keyframes splashFade{to{opacity:0;visibility:hidden}}
    @media (prefers-reduced-motion:reduce){
      .emoji{animation:none}
      #splash{animation:splashFade .01s linear .8s forwards}
    }
  </style>
</head>
<body>
  <!-- Splash -->
  <div id="splash" aria-label="ã‚³ã‚³ã‚¤ãƒã‚¯ã‚¤ã‚ºã®ã‚ªãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°">
    <div class="splash-inner">
      <div class="logo"><span class="brand">ã‚³ã‚³ã‚¤ãƒã‚¯ã‚¤ã‚º</span><span class="emoji" aria-hidden="true">ğŸ›</span></div>
      <p class="muted">æ¥­å‹™çŸ¥è­˜ã‚’ã‚²ãƒ¼ãƒ æ„Ÿè¦šã§è¦šãˆã‚ˆã†</p>
      <button id="skipBtn" class="btn skip">ã‚¹ã‚­ãƒƒãƒ—</button>
    </div>
  </div>

  <div class="wrap">
    <!-- HOMEï¼ˆå¸¸ã«è¡¨ç¤ºï¼‰ -->
    <section id="home" class="card" aria-labelledby="homeTitle">
      <h1 id="homeTitle">æ¥­å‹™çŸ¥è­˜ã‚¯ã‚¤ã‚ºï¼ˆãƒ©ã‚¤ã‚¹é‡ â†’ ã‚½ãƒ¼ã‚¹é‡ï¼ãŠç‰ï¼‰</h1>
      <p class="muted">
        <b>è¡¨ç¤ºãƒãƒ¼ã‚¸ãƒ§ãƒ³:</b> <span id="ver">v20250913f</span> ï¼
        <b>ç¾åœ¨ã®ãƒ‘ã‚¹:</b> <span id="path"></span>
      </p>
      <div class="row">
        <label for="qCount" class="muted">å‡ºé¡Œæ•°</label>
        <input id="qCount" type="number" min="1" value="16" />
        <span class="pill" id="bankSize"></span>
      </div>
      <div class="row">
        <button id="startBtn" class="btn primary">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
        <button id="howBtn" class="btn">ï¼Ÿ éŠã³æ–¹</button>
      </div>
    </section>

    <!-- QUIZ -->
    <section id="quiz" class="card" aria-live="polite" style="display:none">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <div><span id="qIndex">1</span>/<span id="qTotal">1</span></div>
        <div class="pill">æ­£è§£ï¼š<span id="qCorrect">0</span></div>
      </div>
      <div class="progress"><div id="bar" class="bar"></div></div>
      <h2 id="qTitle">å•é¡Œæ–‡</h2>
      <div id="choiceWrap" class="choices" role="group" aria-label="é¸æŠè‚¢"></div>
      <div class="foot">
        <button id="nextBtn" class="btn" disabled>æ¬¡ã¸ â–¶</button>
        <span id="judgeText" class="muted"></span>
      </div>
    </section>

    <!-- RESULT -->
    <section id="result" class="card" aria-labelledby="resTitle" style="display:none">
      <h2 id="resTitle">çµæœ</h2>
      <p style="font-size:clamp(24px,4vw,36px);font-weight:800"><span id="scoreText">0/0</span></p>
      <p id="scoreMsg" class="muted"></p>
      <div class="row">
        <button id="retryBtn" class="btn primary">ã‚‚ã†ä¸€åº¦</button>
        <button id="homeBtn" class="btn">ãƒˆãƒƒãƒ—ã¸</button>
      </div>
    </section>
  </div>

  <script>
  // Splash: æ‰‹å‹•ã‚¹ã‚­ãƒƒãƒ— & Startã§å³æ¶ˆãˆã‚‹
  const splash = document.getElementById('splash');
  document.getElementById('skipBtn').addEventListener('click', ()=> splash.style.display='none');

  // ç”»é¢ãƒ˜ãƒ«ãƒ—
  document.getElementById('path').textContent = location.pathname + location.search;

  // å•é¡Œãƒ‡ãƒ¼ã‚¿
  const questionBank = [
    { q:'ãƒ©ã‚¤ã‚¹é‡100gï¼ˆãŠå­æ§˜ï¼‰ã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['154gï¼1å¼·','176gï¼2æ¯','88gï¼1æ¯','120gï¼1.5æ¯'], answer:'88gï¼1æ¯' },
    { q:'ãƒ©ã‚¤ã‚¹é‡150gï¼ˆãƒãƒ¼ãƒ•ï¼‰ã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['176gï¼2æ¯','140gï¼1æ¯','154gï¼1å¼·','220gï¼2.5æ¯'], answer:'154gï¼1å¼·' },
    { q:'ãƒ©ã‚¤ã‚¹é‡200gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['176gï¼2æ¯','154gï¼1å¼·','220gï¼2.5æ¯','200gï¼2.5æ¯'], answer:'176gï¼2æ¯' },
    { q:'ãƒ©ã‚¤ã‚¹é‡250ã€œ300gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['200gï¼2æ¯','290gï¼3å¼·','220gï¼2.5æ¯','176gï¼2æ¯'], answer:'220gï¼2.5æ¯' },
    { q:'ãƒ©ã‚¤ã‚¹é‡350ã€œ400gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['220gï¼2.5æ¯','290gï¼3å¼·','360gï¼4å¼·','440gï¼5æ¯'], answer:'290gï¼3å¼·' },
    { q:'ãƒ©ã‚¤ã‚¹é‡500gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['360gï¼4å¼·','290gï¼3å¼·','440gï¼5æ¯','484gï¼5.5æ¯'], answer:'360gï¼4å¼·' },
    { q:'ãƒ©ã‚¤ã‚¹é‡600gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['360gï¼4å¼·','484gï¼5.5æ¯','440gï¼5æ¯','528gï¼6æ¯'], answer:'440gï¼5æ¯' },
    { q:'ãƒ©ã‚¤ã‚¹é‡700gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['484gï¼5.5æ¯','440gï¼5æ¯','528gï¼6æ¯','572gï¼6.5æ¯'], answer:'484gï¼5.5æ¯' },
    { q:'ãƒ©ã‚¤ã‚¹é‡800gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['484gï¼5.5æ¯','572gï¼6.5æ¯','528gï¼6æ¯','600gï¼6.5æ¯'], answer:'528gï¼6æ¯' },
    { q:'ãƒ©ã‚¤ã‚¹é‡900gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['528gï¼6æ¯','650gï¼7å¼·','572gï¼6.5æ¯','484gï¼5.5æ¯'], answer:'572gï¼6.5æ¯' },
    { q:'ãƒ©ã‚¤ã‚¹é‡1000gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['572gï¼6.5æ¯','730gï¼8å¼·','606gï¼7å¼·','650gï¼7å¼·'], answer:'650gï¼7å¼·' },
    { q:'ãƒ©ã‚¤ã‚¹é‡1100gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['572gï¼6.5æ¯','650gï¼7å¼·','730gï¼8å¼·','600gï¼6.5æ¯'], answer:'650gï¼7å¼·' },
    { q:'ãƒ©ã‚¤ã‚¹é‡1200gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['650gï¼7å¼·','572gï¼6.5æ¯','694gï¼7å¼·','730gï¼8å¼·'], answer:'650gï¼7å¼·' },
    { q:'ãƒ©ã‚¤ã‚¹é‡1300gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['650gï¼7å¼·','730gï¼7å¼·','694gï¼7å¼·','572gï¼6.5æ¯'], answer:'730gï¼7å¼·' },
    { q:'ãƒ©ã‚¤ã‚¹é‡1400gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['650gï¼7å¼·','572gï¼6.5æ¯','730gï¼8å¼·','800gï¼8æ¯'], answer:'730gï¼8å¼·' },
    { q:'ãƒ©ã‚¤ã‚¹é‡1500gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ', choices:['730gï¼8å¼·','800gï¼8æ¯','650gï¼7å¼·','745gï¼8å¼·'], answer:'730gï¼8å¼·' },
  ];

  const $=s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
  const shuffle=arr=>arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(v=>v[1]);

  const home=$('#home'), quiz=$('#quiz'), result=$('#result');
  const startBtn=$('#startBtn'), howBtn=$('#howBtn');
  const qCount=$('#qCount'), bankSize=$('#bankSize');
  const qIndex=$('#qIndex'), qTotal=$('#qTotal'), qTitle=$('#qTitle'), choiceWrap=$('#choiceWrap');
  const nextBtn=$('#nextBtn'), judgeText=$('#judgeText'), bar=$('#bar');
  const scoreText=$('#scoreText'), scoreMsg=$('#scoreMsg'), retryBtn=$('#retryBtn'), homeBtn=$('#homeBtn');
  const qCorrectEl=$('#qCorrect');

  bankSize.textContent=`å…¨ ${questionBank.length} å•`;
  qCount.max=questionBank.length; qCount.value=questionBank.length;
  document.getElementById('path').textContent = location.pathname + location.search;

  let picked=[], idx=0, correct=0;

  function show(el){ home.style.display='none'; quiz.style.display='none'; result.style.display='none'; el.style.display='block'; }

  function begin(n){
    splash.style.display='none'; // Startæ™‚ã¯å³ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ã‚’æ¶ˆã™
    picked=shuffle(questionBank).slice(0,n).map(q=>({...q}));
    idx=0; correct=0; qCorrectEl.textContent='0';
    qTotal.textContent=picked.length; nextBtn.disabled=true; judgeText.textContent='';
    show(quiz); render();
  }
  function render(){
    const cur=picked[idx];
    qIndex.textContent=idx+1; qTitle.textContent=cur.q; judgeText.textContent='';
    bar.style.width=`${(idx/picked.length)*100}%`; nextBtn.disabled=true;
    choiceWrap.innerHTML='';
    shuffle(cur.choices).forEach(t=>{
      const b=document.createElement('button'); b.className='choice'; b.textContent=t; b.type='button';
      b.addEventListener('click',()=>onPick(b,t,cur.answer)); choiceWrap.appendChild(b);
    });
  }
  function onPick(btn, pickedText, answer){
    if(nextBtn.disabled===false) return;
    const buttons=$$('.choice'); buttons.forEach(b=>b.disabled=true);
    const ok=pickedText===answer;
    btn.classList.add(ok?'correct':'wrong'); judgeText.textContent= ok?'æ­£è§£ï¼':'ä¸æ­£è§£â€¦'; judgeText.style.color= ok?'#22c55e':'#ef4444';
    if(ok){ correct++; if(qCorrectEl) qCorrectEl.textContent=String(correct); }
    const a=buttons.find(b=>b.textContent===answer); if(a) a.classList.add('correct');
    nextBtn.disabled=false;
  }
  function finish(){
    bar.style.width='100%'; scoreText.textContent=`${correct} / ${picked.length}`;
    const r=correct/picked.length; scoreMsg.textContent= r>=.9?'å®Œç’§ï¼ç¾å ´ãƒã‚¹ã‚¿ãƒ¼ï¼': r>=.7?'ã„ã„æ„Ÿã˜ã€ã“ã®èª¿å­ï¼':'ã‚‚ã†ä¸€æ¯ã€‚å¾©ç¿’ã—ã¦ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã‚ˆã†ã€‚';
    show(result);
  }

  startBtn.addEventListener('click',()=>begin(Math.max(1,Math.min(parseInt(qCount.value||'1',10),questionBank.length))));
  retryBtn.addEventListener('click',()=>begin(picked.length));
  homeBtn.addEventListener('click',()=>show(home));
  howBtn.addEventListener('click',()=>alert('4æŠå•é¡Œã§ã™ã€‚å‡ºé¡Œæ•°ã‚’é¸ã‚“ã§ã‚¹ã‚¿ãƒ¼ãƒˆã€‚é¸æŠè‚¢ã¯æ¯å›ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã•ã‚Œã¾ã™ã€‚'));
  nextBtn.addEventListener('click',()=>{ idx++; if(idx>=picked.length) finish(); else render(); });
  qCount.addEventListener('input',()=>{ const v=parseInt(qCount.value||'1',10); if(Number.isNaN(v)||v<1) qCount.value=1; else if(v>questionBank.length) qCount.value=questionBank.length; });
  </script>
</body>
</html>
