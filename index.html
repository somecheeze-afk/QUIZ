<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ã‚³ã‚³ã‚¤ãƒã‚¯ã‚¤ã‚ºï½œæ¥­å‹™çŸ¥è­˜4æŠ</title>
  <meta name="description" content="ã‚³ã‚³ã‚¤ãƒã‚¯ã‚¤ã‚ºï¼ˆæ¥­å‹™ç”¨ï¼‰ï¼šãƒ©ã‚¤ã‚¹é‡â†’ã‚½ãƒ¼ã‚¹é‡ãƒ»ãŠç‰ã®å¯¾å¿œã‚’è¦šãˆã‚‹4æŠã‚¯ã‚¤ã‚ºã€‚GitHub Pages ã§é…å¸ƒå¯èƒ½ãªå˜ä¸€HTMLã€‚" />
  <style>
    :root{
      --bg: #0f172a;        /* slate-900 */
      --panel: #111827;     /* gray-900 */
      --panel-2:#1f2937;    /* gray-800 */
      --text:#e5e7eb;       /* gray-200 */
      --accent:#f59e0b;     /* amber-500 */
      --ok:#22c55e;         /* green-500 */
      --ng:#ef4444;         /* red-500 */
      --muted:#9ca3af;      /* gray-400 */
    }
    html,body{height:100%;}
    body{
      margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic UI", "Meiryo", sans-serif;
      color:var(--text); background:linear-gradient(180deg, #0b1025 0%, #0f172a 100%);
    }
    .container{ max-width: 860px; margin: 0 auto; padding: 24px; }
    .card{ background:linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%); border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.3); }
    h1,h2{ margin:0 0 12px; letter-spacing: .02em; }
    h1{ font-size: clamp(28px, 4vw, 40px); }
    h2{ font-size: clamp(20px, 2.6vw, 28px); color:#eab308; }
    p{ line-height:1.7; color:#d1d5db; }
    .muted{ color:var(--muted); }
    button{ appearance:none; border:none; cursor:pointer; }

    /* Splash */
    #splash{ position:fixed; inset:0; display:grid; place-items:center; background: radial-gradient(1200px 800px at 50% 0%, #1f2937 0%, #0f172a 60%); z-index:100; overflow:hidden; }
    .splash-inner{ text-align:center; }
    .logo{ font-weight:800; font-size: clamp(36px, 6vw, 64px); display:flex; gap:.3em; align-items:center; justify-content:center; }
    .logo span{ display:inline-block; }
    .emoji{ font-size: 1em; filter: drop-shadow(0 8px 20px rgba(0,0,0,.6)); animation: bob 1.8s ease-in-out infinite; }
    .brand{ background: linear-gradient(90deg,#fde68a,#f59e0b,#f97316); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color: transparent; }
    @keyframes bob { 0%,100%{ transform: translateY(0) rotate(0deg); } 50%{ transform: translateY(-8px) rotate(4deg);} }
    .fadeOut{ animation: fadeOut .7s ease forwards; }
    @keyframes fadeOut{ to{ opacity:0; visibility:hidden; } }

    /* Home */
    #home, #quiz, #result { display:none; }
    .show{ display:block; }
    .row{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    .grow{ flex:1 1 auto; }
    .controls{ margin-top: 14px; display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .btn{ padding:12px 16px; background: #374151; color:#fff; border-radius:12px; font-weight:600; transition: transform .05s ease, background .2s ease; }
    .btn:hover{ background:#4b5563; }
    .btn:active{ transform: translateY(1px); }
    .btn-primary{ background: linear-gradient(90deg, #f59e0b, #f97316); color:#111; }
    .btn-primary:hover{ filter: brightness(1.06); }

    .input{ padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.1); background:#0b1020; color:#fff; min-width: 120px; }
    .small{ font-size: 12px; }

    /* Quiz */
    .q-meta{ display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:8px; }
    .progress{ height:10px; border-radius:999px; background:#111827; border:1px solid rgba(255,255,255,.06); overflow:hidden; }
    .bar{ height:100%; width:0%; background: linear-gradient(90deg, #22c55e, #f59e0b); transition: width .25s ease; }

    .q-text{ font-size: clamp(18px, 2.5vw, 22px); margin: 10px 0 12px; }
    .choices{ display:grid; grid-template-columns: 1fr; gap:10px; }
    .choice{ width:100%; text-align:left; padding:14px; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:#0b1222; color:#e5e7eb; font-size:16px; }
    .choice:hover{ background:#0f1630; }
    .choice.correct{ border-color: rgba(34,197,94,.9); box-shadow: 0 0 0 2px rgba(34,197,94,.25) inset; }
    .choice.wrong{ border-color: rgba(239,68,68,.9); box-shadow: 0 0 0 2px rgba(239,68,68,.25) inset; }
    .choice[disabled]{ opacity:.7; cursor:not-allowed; }

    .footer{ margin-top:12px; display:flex; justify-content:space-between; align-items:center; gap:12px; }

    /* Result */
    .score{ font-size: clamp(24px, 4vw, 36px); font-weight:800; }
    .pill{ padding:6px 10px; border-radius:999px; background:#111827; border:1px solid rgba(255,255,255,.08); }

    /* Tips */
    details{ border:1px dashed rgba(255,255,255,.15); border-radius:12px; padding:12px; }
    summary{ cursor:pointer; color:#fbbf24; font-weight:700; }
    code{ background:#0b1020; padding:.2em .4em; border-radius:.4em; border:1px solid rgba(255,255,255,.1); }

    /* Responsive */
    @media (min-width: 720px){
      .choices{ grid-template-columns: 1fr 1fr; }
    }
  </style>
</head>
<body>
  <!-- Splash / Intro -->
  <div id="splash">
    <div class="splash-inner">
      <div class="logo" aria-label="ã‚³ã‚³ã‚¤ãƒã‚¯ã‚¤ã‚º">
        <span class="brand">ã‚³ã‚³ã‚¤ãƒã‚¯ã‚¤ã‚º</span>
        <span class="emoji" aria-hidden="true">ğŸ›</span>
      </div>
      <p class="muted">æ¥­å‹™çŸ¥è­˜ã‚’ã‚²ãƒ¼ãƒ æ„Ÿè¦šã§è¦šãˆã‚ˆã†</p>
    </div>
  </div>

  <div class="container">
    <!-- Home (Start) -->
    <section id="home" class="card show" aria-labelledby="homeTitle">
      <h1 id="homeTitle">æ¥­å‹™çŸ¥è­˜ã‚¯ã‚¤ã‚ºï¼ˆãƒ©ã‚¤ã‚¹é‡ â†’ ã‚½ãƒ¼ã‚¹é‡ï¼ãŠç‰ï¼‰</h1>
      <p>ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã§å‡ºé¡Œæ•°ã‚’é¸ã³ã€ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã§é–‹å§‹ã—ã¾ã™ã€‚é¸æŠè‚¢ã¯æ¯å›ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã•ã‚Œã¾ã™ã€‚</p>
      <div class="row">
        <label for="qCount" class="muted">å‡ºé¡Œæ•°</label>
        <input id="qCount" class="input" type="number" min="1" value="16" />
        <span class="pill small" id="bankSize"></span>
      </div>
      <div class="controls">
        <button id="startBtn" class="btn btn-primary">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
        <button id="howBtn" class="btn">ï¼Ÿ éŠã³æ–¹</button>
      </div>
      <details style="margin-top:14px;">
        <summary>å‡ºé¡Œå†…å®¹ã‚’è¿½åŠ ãƒ»ç·¨é›†ã—ãŸã„ï¼ˆç®¡ç†è€…å‘ã‘ï¼‰</summary>
        <p class="small">ã“ã®HTMLã® <code>questionBank</code> é…åˆ—ã«å•é¡Œã‚’è¿½è¨˜ã™ã‚‹ã ã‘ã§OKã€‚<br>å½¢å¼ï¼š<code>{ q: "å•é¡Œæ–‡", choices: ["A","B","C","D"], answer: "æ­£è§£ã®æ–‡å­—åˆ—" }</code></p>
      </details>
    </section>

    <!-- Quiz -->
    <section id="quiz" class="card" aria-live="polite">
      <div class="q-meta">
        <div><span id="qIndex">1</span>/<span id="qTotal">1</span></div>
        <div class="pill">æ­£è§£ï¼š<span id="qCorrect">0</span></div>
      </div>
      <div class="progress" aria-hidden="true"><div id="bar" class="bar"></div></div>
      <h2 id="qTitle" class="q-text">å•é¡Œæ–‡</h2>
      <div id="choiceWrap" class="choices" role="group" aria-label="é¸æŠè‚¢"></div>
      <div class="footer">
        <button id="nextBtn" class="btn" disabled>æ¬¡ã¸ â–¶</button>
        <span id="judgeText" class="muted"></span>
      </div>
    </section>

    <!-- Result -->
    <section id="result" class="card" aria-labelledby="resTitle">
      <h2 id="resTitle">çµæœ</h2>
      <p class="score"><span id="scoreText">0/0</span></p>
      <p id="scoreMsg" class="muted"></p>
      <div class="controls">
        <button id="retryBtn" class="btn btn-primary">ã‚‚ã†ä¸€åº¦</button>
        <button id="homeBtn" class="btn">ãƒˆãƒƒãƒ—ã¸</button>
      </div>
    </section>
  </div>

  <script>
  // ====== å•é¡Œãƒ‡ãƒ¼ã‚¿ ======
  const questionBank = [
    { q: 'ãƒ©ã‚¤ã‚¹é‡100gï¼ˆãŠå­æ§˜ï¼‰ã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['154gï¼1å¼·','176gï¼2æ¯','88gï¼1æ¯','120gï¼1.5æ¯'],
      answer: '88gï¼1æ¯' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡150gï¼ˆãƒãƒ¼ãƒ•ï¼‰ã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['176gï¼2æ¯','140gï¼1æ¯','154gï¼1å¼·','220gï¼2.5æ¯'],
      answer: '154gï¼1å¼·' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡200gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['176gï¼2æ¯','154gï¼1å¼·','220gï¼2.5æ¯','200gï¼2.5æ¯'],
      answer: '176gï¼2æ¯' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡250ã€œ300gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['200gï¼2æ¯','290gï¼3å¼·','220gï¼2.5æ¯','176gï¼2æ¯'],
      answer: '220gï¼2.5æ¯' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡350ã€œ400gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['220gï¼2.5æ¯','290gï¼3å¼·','360gï¼4å¼·','440gï¼5æ¯'],
      answer: '290gï¼3å¼·' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡500gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['360gï¼4å¼·','290gï¼3å¼·','440gï¼5æ¯','484gï¼5.5æ¯'],
      answer: '360gï¼4å¼·' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡600gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['360gï¼4å¼·','484gï¼5.5æ¯','440gï¼5æ¯','528gï¼6æ¯'],
      answer: '440gï¼5æ¯' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡700gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['484gï¼5.5æ¯','440gï¼5æ¯','528gï¼6æ¯','572gï¼6.5æ¯'],
      answer: '484gï¼5.5æ¯' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡800gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['484gï¼5.5æ¯','572gï¼6.5æ¯','528gï¼6æ¯','600gï¼6.5æ¯'],
      answer: '528gï¼6æ¯' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡900gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['528gï¼6æ¯','650gï¼7å¼·','572gï¼6.5æ¯','484gï¼5.5æ¯'],
      answer: '572gï¼6.5æ¯' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡1000gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['572gï¼6.5æ¯','730gï¼8å¼·','606gï¼7å¼·','650gï¼7å¼·'],
      answer: '650gï¼7å¼·' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡1100gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['572gï¼6.5æ¯','650gï¼7å¼·','730gï¼8å¼·','600gï¼6.5æ¯'],
      answer: '650gï¼7å¼·' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡1200gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['650gï¼7å¼·','572gï¼6.5æ¯','694gï¼7å¼·','730gï¼8å¼·'],
      answer: '650gï¼7å¼·' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡1300gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['650gï¼7å¼·','730gï¼7å¼·','694gï¼7å¼·','572gï¼6.5æ¯'],
      answer: '730gï¼7å¼·' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡1400gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['650gï¼7å¼·','572gï¼6.5æ¯','730gï¼8å¼·','800gï¼8æ¯'],
      answer: '730gï¼8å¼·' },
    { q: 'ãƒ©ã‚¤ã‚¹é‡1500gã®å ´åˆã€ã‚½ãƒ¼ã‚¹é‡ã¨ãŠç‰ã¯ï¼Ÿ',
      choices: ['730gï¼8å¼·','800gï¼8æ¯','650gï¼7å¼·','745gï¼8å¼·'],
      answer: '730gï¼8å¼·' },
  ];

  // ====== Utility ======
  const $  = sel => document.querySelector(sel);
  const $$ = sel => Array.from(document.querySelectorAll(sel));
  const shuffle = arr => arr.map(v => [Math.random(), v]).sort((a,b)=>a[0]-b[0]).map(v=>v[1]);

  // ====== Simple SFX (WebAudio) ======
  const audio = {
    ctx: null,
    ensure(){ if(!this.ctx){ this.ctx = new (window.AudioContext || window.webkitAudioContext)(); } },
    beep({freq=880, dur=0.12, type='sine', gain=0.06}={}){
      this.ensure();
      const t0 = this.ctx.currentTime;
      const osc = this.ctx.createOscillator();
      const g = this.ctx.createGain();
      osc.type = type; osc.frequency.value = freq;
      g.gain.value = gain; g.gain.setTargetAtTime(0.0001, t0+dur*0.8, 0.03);
      osc.connect(g).connect(this.ctx.destination);
      osc.start(t0); osc.stop(t0+dur);
    },
    correct(){ this.beep({freq: 1046, dur:.10, type:'triangle', gain:.06}); setTimeout(()=>this.beep({freq: 1318, dur:.12, type:'triangle', gain:.06}), 90); },
    wrong(){ this.beep({freq: 196, dur:.14, type:'sawtooth', gain:.06}); setTimeout(()=>this.beep({freq: 174, dur:.16, type:'sawtooth', gain:.05}), 120); }
  };

  // ====== State ======
  let picked = [];   // å‡ºé¡Œã‚»ãƒƒãƒˆ
  let idx = 0;       // ç¾åœ¨ã®å•é¡Œã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  let correct = 0;   // æ­£è§£æ•°

  // ====== Elements ======
  const splash   = $('#splash');
  const home     = $('#home');
  const quiz     = $('#quiz');
  const result   = $('#result');
  const qCount   = $('#qCount');
  const bankSize = $('#bankSize');
  const startBtn = $('#startBtn');
  const howBtn   = $('#howBtn');
  const qIndex   = $('#qIndex');
  const qTotal   = $('#qTotal');
  const qTitle   = $('#qTitle');
  const choiceWrap = $('#choiceWrap');
  const nextBtn  = $('#nextBtn');
  const judgeText= $('#judgeText');
  const bar      = $('#bar');
  const scoreText= $('#scoreText');
  const scoreMsg = $('#scoreMsg');
  const retryBtn = $('#retryBtn');
  const homeBtn  = $('#homeBtn');
  const qCorrectEl = $('#qCorrect'); // è¿½åŠ ï¼šæ­£è§£æ•°è¡¨ç¤º

  // åˆæœŸåŒ–
  bankSize.textContent = `å…¨ ${questionBank.length} å•`;
  qCount.max = questionBank.length;
  qCount.value = questionBank.length;

  // ã‚¹ãƒ—ãƒ©ãƒƒã‚·ãƒ¥ã‚’å°‘ã—è¡¨ç¤ºã—ã¦ã‹ã‚‰ãƒ•ã‚§ãƒ¼ãƒ‰
  window.addEventListener('load', () => {
    setTimeout(()=>{
      splash.classList.add('fadeOut');
      setTimeout(()=> splash.style.display='none', 700);
    }, 1000);
  });

  howBtn.addEventListener('click', ()=>{
    alert('4æŠå•é¡Œã§ã™ã€‚å‡ºé¡Œæ•°ã‚’é¸ã‚“ã§ã‚¹ã‚¿ãƒ¼ãƒˆã€‚é¸æŠè‚¢ã¯æ¯å›ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã•ã‚Œã¾ã™ã€‚æ­£è§£ãƒ»ä¸æ­£è§£ã§éŸ³ãŒé³´ã‚Šã¾ã™ã€‚');
  });

  startBtn.addEventListener('click', () => {
    const n = Math.max(1, Math.min(parseInt(qCount.value||'1',10), questionBank.length));
    begin(n);
  });

  retryBtn.addEventListener('click', () => begin(picked.length));
  homeBtn.addEventListener('click', () => show(home));

  function begin(n){
    picked = shuffle(questionBank).slice(0, n).map(q => ({...q}));
    idx = 0; correct = 0;
    qTotal.textContent = picked.length;
    qCorrectEl.textContent = '0';
    nextBtn.disabled = true;
    judgeText.textContent = '';
    show(quiz);
    render();
  }

  function show(section){
    [home, quiz, result].forEach(s=>s.classList.remove('show'));
    section.classList.add('show');
  }

  function render(){
    const cur = picked[idx];
    qIndex.textContent = (idx+1);
    qTitle.textContent = cur.q;
    judgeText.textContent = '';
    bar.style.width = `${(idx / picked.length) * 100}%`;
    nextBtn.disabled = true;

    // é¸æŠè‚¢ã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«è¡¨ç¤º
    choiceWrap.innerHTML = '';
    const shuffled = shuffle(cur.choices.map((t,i)=>({t, i})));

    shuffled.forEach(({t}) => {
      const btn = document.createElement('button');
      btn.className = 'choice';
      btn.type = 'button';
      btn.textContent = t;
      btn.addEventListener('click', () => onPick(btn, t, cur.answer));
      choiceWrap.appendChild(btn);
    });
  }

  function onPick(btn, pickedText, answer){
    // æ—¢ã«åˆ¤å®šæ¸ˆã¿ãªã‚‰ç„¡è¦–
    if(nextBtn.disabled === false) return;

    const buttons = $$('.choice');
    buttons.forEach(b => b.disabled = true);

    const isCorrect = pickedText === answer;
    if(isCorrect){
      btn.classList.add('correct');
      correct++;
      qCorrectEl.textContent = String(correct); // è¿½åŠ ï¼šæ­£è§£æ•°è¡¨ç¤ºã‚’æ›´æ–°
      judgeText.textContent = 'æ­£è§£ï¼';
      judgeText.style.color = 'var(--ok)';
      audio.correct();
    }else{
      btn.classList.add('wrong');
      judgeText.textContent = 'ä¸æ­£è§£â€¦';
      judgeText.style.color = 'var(--ng)';
      audio.wrong();
      // æ­£è§£è¡¨ç¤º
      const ansBtn = buttons.find(b => b.textContent === answer);
      if (ansBtn) ansBtn.classList.add('correct');
    }

    nextBtn.disabled = false;
  }

  nextBtn.addEventListener('click', () => {
    idx++;
    if(idx >= picked.length){
      finish();
    }else{
      render();
    }
  });

  function finish(){
    bar.style.width = '100%';
    scoreText.textContent = `${correct} / ${picked.length}`;
    const rate = correct / picked.length;
    scoreMsg.textContent = rate >= .9 ? 'å®Œç’§ï¼ç¾å ´ãƒã‚¹ã‚¿ãƒ¼ï¼' : rate >= .7 ? 'ã„ã„æ„Ÿã˜ã€ã“ã®èª¿å­ï¼' : 'ã‚‚ã†ä¸€æ¯ã€‚å¾©ç¿’ã—ã¦ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã—ã‚ˆã†ã€‚';
    show(result);
  }

  // æ•°å­—å…¥åŠ›ã‚’å®‰å…¨åŒ–
  qCount.addEventListener('input', () => {
    const v = parseInt(qCount.value||'1',10);
    if(Number.isNaN(v)) qCount.value = 1;
    else if(v < 1) qCount.value = 1;
    else if(v > questionBank.length) qCount.value = questionBank.length;
  });
  </script>
</body>
</html>
